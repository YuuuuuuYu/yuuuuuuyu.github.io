---
title: OAuth2
author: nakji
date: 2025-01-17 17:23:00 +0900
tags: [Security, oauth2, authentication, authorization]
showToc: true
TocOpen: true
comments: true
disableHLJS: false
disableShare: false
hideSummary: false
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: true
UseHugoToc: true
---
ðŸ”” **Oauth2? ê·¸ëŸ¼ Oauth1ë„?**   
ðŸ”” **Oauth2 ë™ìž‘ ê³¼ì •**   

> RFC6749(Oauth 2.0) ë¬¸ì„œë¥¼ í† ëŒ€ë¡œ ìš”ì•½í•˜ì—¬ ì •ë¦¬í•œ ê¸€ì´ë‹ˆ, ìžì„¸í•œ ë‚´ìš©ì€ [í•´ë‹¹ ë¬¸ì„œ](https://datatracker.ietf.org/doc/html/rfc6749)ë¥¼ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëžë‹ˆë‹¤.

## **What? Why?**
*ì¸ì¦(authentication)* ì´ ì•„ë‹Œ `ì¸ê°€(authorization)`ì— ì´ˆì ì„ ë§žì¶”ë©°, ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìžì‹ ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì œí•œì  ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” í”„ë ˆìž„ì›Œí¬

### **ì—­í• **
- **Resource Owner**
    - ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤(Protected Resource)ì˜ ì‹¤ì œ ì†Œìœ ìž í˜¹ì€ ì£¼ì²´
    - ex) ì‚¬ìš©ìžì˜ ê³„ì •, ì‚¬ìš©ìž ë°ì´í„°

- **Resource Server**
    - ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ë¥¼ í˜¸ìŠ¤íŒ…(ì €ìž¥ ë° ê´€ë¦¬)í•˜ê³  ìžˆëŠ” ì„œë²„
    - í´ë¼ì´ì–¸íŠ¸ê°€ ì œê³µí•˜ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì„ ê²€ì¦í•˜ê³ , ìœ íš¨í•œ í† í°ì´ë©´ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ í—ˆìš©

- **Client**
    - ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžë¥¼ ëŒ€ì‹ í•˜ì—¬ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ë ¤ê³  ìš”ì²­í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜
    - ex) ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜, ëª¨ë°”ì¼ ì•±, ë°ìŠ¤í¬í†± í”„ë¡œê·¸ëž¨ ë“±

- **Authorization Server**
    - í´ë¼ì´ì–¸íŠ¸ì˜ ê¶Œí•œ ìš”ì²­ì„ ì¸ì¦/ì¸ê°€í•˜ê³ , ì•¡ì„¸ìŠ¤ í† í°(í˜¹ì€ ë¦¬í”„ë ˆì‹œ í† í°)ì„ ë°œê¸‰í•˜ëŠ” ì„œë²„
    - Resource Ownerì™€ Client ì‚¬ì´ì—ì„œ ì•ˆì „í•˜ê²Œ í† í°ì„ ì£¼ê³ ë°›ë„ë¡ ì¤‘ìž¬

### **Oauth 1.0 vs 2.0**
ê¸°ì¡´ `Oauth 1.0`ì€ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ìžˆì—ˆëŠ”ë°, ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ `Oauth 2.0`ì´ ë§Œë“¤ì–´ì¡Œë‹¤.

#### 1.0
- **ë³µìž¡í•œ ì„œëª… í”„ë¡œì„¸ìŠ¤**
    - ê° ìš”ì²­ë§ˆë‹¤ ì„œëª…ì„ ìƒì„±

- **ìœ ì—°ì„± ë¶€ì¡±**
    - íŠ¹ì •í•œ ì¸ì¦ í”Œë¡œìš°ì— êµ­í•œë˜ì–´ ìžˆìŒ 
    - ex) ëª¨ë°”ì¼ ì•±, ë‹¨ì¼ íŽ˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜(SPA) ë“±

- ë³´ì•ˆìƒì˜ ì œì•½
    - HTTPSì™€ ê°™ì€ ì „ì†¡ ê³„ì¸µ ë³´ì•ˆì„ ì™„ì „ížˆ ëŒ€ì²´í•  ìˆ˜ ì—†ìŒ
    - ì„œëª… ê´€ë¦¬ ìžì²´ê°€ ë³´ì•ˆ ìœ„í—˜ ìš”ì†Œ ê°€ëŠ¥ì„±

- í™•ìž¥ì„±ì˜ í•œê³„

#### 2.0
- **ë‹¨ìˆœí™”ëœ ì¸ì¦ í”„ë¡œì„¸ìŠ¤**
    - ì„œëª… ê¸°ë°˜ ì¸ì¦ì„ ì œê±°í•˜ê³  HTTPSë¥¼ ê¸°ë³¸ ë³´ì•ˆ ê³„ì¸µìœ¼ë¡œ ì‚¬ìš©

- **ë‹¤ì–‘í•œ ì¸ì¦ í”Œë¡œìš° ì§€ì›**
    - ë‹¤ì–‘í•œ ì¸ì¦ í”Œë¡œìš°(ê·¸ëžœíŠ¸ íƒ€ìž…)ë¥¼ ì§€ì›
    - ex) Authorization Code, Implicit, Client Credentials ë“±

- í™•ìž¥ì„±ê³¼ ìœ ì—°ì„± í–¥ìƒ
    - ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•˜ì—¬ í•„ìš”ì— ë”°ë¼ í™•ìž¥ ê°€ëŠ¥
    - ex) PKCE(Proof Key for Code Exchange)

- í–¥ìƒëœ ë³´ì•ˆ ê¸°ëŠ¥
    - í† í° ê¸°ë°˜ ì¸ì¦
    - í† í°ì˜ ë²”ìœ„(scope) ì„¸ë¶„í™”

- ë” ë‚˜ì€ ì‚¬ìš©ìž ê²½í—˜
    - SPAë‚˜ ë„¤ì´í‹°ë¸Œ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ì‰½ê²Œ í†µí•© ê°€ëŠ¥


## **íë¦„ë„**
```
 +--------+                               +---------------+
 |        |--(A)- Authorization Request ->|   Resource    |
 |        |                               |     Owner     |
 |        |<-(B)-- Authorization Grant ---|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(C)-- Authorization Grant -->| Authorization |
 | Client |                               |     Server    |
 |        |<-(D)----- Access Token -------|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(E)----- Access Token ------>|    Resource   |
 |        |                               |     Server    |
 |        |<-(F)--- Protected Resource ---|               |
 +--------+                               +---------------+
 ```
[ì¶œì²˜](https://datatracker.ietf.org/doc/html/rfc6749#section-1.2)

### **(A) í´ë¼ì´ì–¸íŠ¸ê°€ ìŠ¹ì¸ ìš”ì²­**
í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžì—ê²Œ ì§ì ‘ ìŠ¹ì¸ ìš”ì²­ì„ í•  ìˆ˜ ìžˆë‹¤. ì¸ì¦ ìš”ì²­ì€ ë¦¬ì†ŒìŠ¤ ì†Œìœ ìž ì§ì ‘ ì´ë£¨ì–´ì§ˆ ìˆ˜ë„ ìžˆê³  ì¤‘ê°œìžë¡œì„œ ì¸ì¦ ì„œë²„ë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì´ë£¨ì–´ì§ˆ ìˆ˜ë„ ìžˆë‹¤.

### (**B) ì¸ì¦ ë¶€ì—¬ë¥¼ ë°›ìŒ**
í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžì˜ ì¸ì¦ì„ ë‚˜íƒ€ë‚´ëŠ” ìžê²© ì¦ëª…ì¸ ì¸ì¦ ë¶€ì—¬ë¥¼ ë°›ëŠ”ë‹¤. ëª…ì„¸ì„œì— ì •ì˜ëœ ë„¤ ê°€ì§€ ìœ í˜• ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ í™•ìž¥ ë¶€ì—¬ ìœ í˜•ì„ ì‚¬ìš©í•˜ì—¬ í‘œí˜„ëœë‹¤. ì¸ì¦ ë¶€ì—¬ ìœ í˜•ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì¦ì„ ìš”ì²­í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ ì¸ì¦ ì„œë²„ê°€ ì§€ì›í•˜ëŠ” ìœ í˜•ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.

### **(C) ì—‘ì„¸ìŠ¤ í† í° ìš”ì²­**
í´ë¼ì´ì–¸íŠ¸ëŠ” ê¶Œí•œ ë¶€ì—¬ ì„œë²„ë¡œ ì¸ì¦í•˜ê³  ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œì‹œí•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•œë‹¤.

### **(D) ì—‘ì„¸ìŠ¤ í† í° ë°œê¸‰**
ì¸ì¦ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•˜ê³  ì¸ì¦ ë¶€ì—¬ë¥¼ ê²€ì¦í•œ í›„ì—, ìœ íš¨í•œ ê²½ìš° ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•œë‹¤.

### **(E) ì¸ì¦**
í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬ì†ŒìŠ¤ ì„œë²„ì—ì„œ ë³´í˜¸ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ê³  ì•¡ì„¸ìŠ¤ í† í°ì„ ì œì‹œí•˜ì—¬ ì¸ì¦í•œë‹¤.

### **(F) ìš”ì²­ ì²˜ë¦¬**
ë¦¬ì†ŒìŠ¤ ì„œë²„ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³  ìœ íš¨í•œ ê²½ìš°, ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.     


***ë‹¤ìŒ ìž¥ì— ì´ì–´ì„œ..***

## **ìžë£Œ ì¶œì²˜**
RFC 6749    
ChatGPT